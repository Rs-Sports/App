<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RS Movie Shop - Admin Panel</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #0f0;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: limegreen;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }

    input[type="text"], select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: none;
      font-size: 16px;
    }

    button {
      margin-top: 20px;
      padding: 12px 25px;
      font-size: 16px;
      font-weight: bold;
      color: black;
      background-color: limegreen;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 10px limegreen;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #00ff00;
    }

    table {
      width: 100%;
      margin-top: 30px;
      border-collapse: collapse;
    }

    th, td {
      padding: 10px;
      border-bottom: 1px solid #0f0;
      text-align: left;
    }

    tr:hover {
      background-color: #223322;
    }

    .delete-btn {
      background-color: red;
      color: white;
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .delete-btn:hover {
      background-color: darkred;
    }
  </style>
</head>
<body>

  <h1>RS Movie Shop - Admin Panel</h1>

  <form id="addVideoForm">
    <label for="src">Video Source URL:</label>
    <input type="text" id="src" required placeholder="https://...">

    <label for="poster">Poster Image URL:</label>
    <input type="text" id="poster" required placeholder="https://...">

    <label for="category">Category:</label>
    <select id="category" required>
      <option value="">-- Select Category --</option>
      <option value="natok">Natok</option>
      <option value="movie">Movie</option>
    </select>

    <button type="submit">Add Video</button>
  </form>

  <table id="videoTable">
    <thead>
      <tr>
        <th>Poster</th>
        <th>Category</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- ভিডিও লিস্ট এখানে দেখাবে -->
    </tbody>
  </table>

  <script>
    // লোকালস্টোরেজ কি
    const STORAGE_KEY = 'rsmovie_playlist';

    // ভিডিও লোড করবে লোকালস্টোরেজ থেকে
    function loadVideos() {
      const data = localStorage.getItem(STORAGE_KEY);
      if (!data) return [];
      try {
        return JSON.parse(data);
      } catch {
        return [];
      }
    }

    // ভিডিও সেভ করবে লোকালস্টোরেজে
    function saveVideos(videos) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(videos));
    }

    // টেবিল আপডেট করবে
    function renderTable() {
      const videos = loadVideos();
      const tbody = document.querySelector('#videoTable tbody');
      tbody.innerHTML = '';
      videos.forEach((video, index) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><img src="${video.poster}" alt="Poster" width="120" style="border-radius: 8px;"></td>
          <td>${video.category}</td>
          <td><button class="delete-btn" onclick="deleteVideo(${index})">Delete</button></td>
        `;
        tbody.appendChild(tr);
      });
    }

    // ভিডিও ডিলিট
    function deleteVideo(index) {
      if (!confirm('Are you sure you want to delete this video?')) return;
      const videos = loadVideos();
      videos.splice(index, 1);
      saveVideos(videos);
      renderTable();
    }

    // নতুন ভিডিও যোগ
    document.getElementById('addVideoForm').addEventListener('submit', e => {
      e.preventDefault();
      const src = document.getElementById('src').value.trim();
      const poster = document.getElementById('poster').value.trim();
      const category = document.getElementById('category').value;

      if (!src || !poster || !category) {
        alert('All fields are required!');
        return;
      }

      const videos = loadVideos();
      videos.push({ src, poster, category });
      saveVideos(videos);
      renderTable();

      // ফর্ম ক্লিয়ার
      e.target.reset();
      alert('Video added successfully!');
    });

    // পেজ লোড হলে টেবিল রেন্ডার করো
    renderTable();
  </script>
</body>
</html>
